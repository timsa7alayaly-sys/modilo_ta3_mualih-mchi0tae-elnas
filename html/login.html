<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Modilo</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
        .login-container {
            max-width: 450px;
            margin: 60px auto;
            padding: 40px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .login-header h1 {
            font-family: 'DM Serif Text', serif;
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 10px;
        }
        .login-header p {
            color: #777;
            font-size: 1rem;
        }
        .form-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }
        .form-tabs button {
            flex: 1;
            padding: 12px;
            border: none;
            background: none;
            color: #777;
            font-size: 1.1rem;
            font-family: 'Noto Serif', serif;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        .form-tabs button.active {
            color: #007BFF;
        }
        .form-tabs button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #007BFF;
        }
        .form-container {
            display: none;
        }
        .form-container.active {
            display: block;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 0.95rem;
        }
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Noto Serif', serif;
            transition: border-color 0.3s;
        }
        .form-group input:focus {
            border-color: #007BFF;
            outline: none;
        }
        .password-toggle {
            position: relative;
        }
        .password-toggle i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #777;
        }
        .submit-btn {
            width: 100%;
            padding: 14px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            font-family: 'Noto Serif', serif;
        }
        .submit-btn:hover {
            background-color: #0056b3;
        }
        .alert {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }
        .alert.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: #777;
        }
        .form-footer a {
            color: #007BFF;
            text-decoration: none;
        }
        .form-footer a:hover {
            text-decoration: underline;
        }
        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: #777;
        }
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #ddd;
        }
        .divider span {
            padding: 0 10px;
        }
    </style>
</head>
<body>
    <header>
        <img src="../images/logo.png" alt="Modilo Logo" style="width: 100px;height: 70px;"/>
        <nav>
            <a href="../index.html">Home</a>
            <a href="men.html">Men</a>
            <a href="women.html">Women</a>
        </nav>
        <a href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                <path d="M442.9 144C415.6 144 389.9 157.1 373.9 179.2L339.5 226.8C335 233 327.8 236.7 320.1 236.7C312.4 236.7 305.2 233 300.7 226.8L266.3 179.2C250.3 157.1 224.6 144 197.3 144C150.3 144 112.2 182.1 112.2 229.1C112.2 279 144.2 327.5 180.3 371.4C221.4 421.4 271.7 465.4 306.2 491.7C309.4 494.1 314.1 495.9 320.2 495.9C326.3 495.9 331 494.1 334.2 491.7C368.7 465.4 419 421.3 460.1 371.4C496.3 327.5 528.2 279 528.2 229.1C528.2 182.1 490.1 144 443.1 144zM335 151.1C360 116.5 400.2 96 442.9 96C516.4 96 576 155.6 576 229.1C576 297.7 533.1 358 496.9 401.9C452.8 455.5 399.6 502 363.1 529.8C350.8 539.2 335.6 543.9 320 543.9C304.4 543.9 289.2 539.2 276.9 529.8C240.4 502 187.2 455.5 143.1 402C106.9 358.1 64 297.7 64 229.1C64 155.6 123.6 96 197.1 96C239.8 96 280 116.5 305 151.1L320 171.8L335 151.1z"/>
            </svg>
        </a>
         <div class="language-selector">
            <button class="language-button" onclick="toggleLanguageDropdown()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                    <path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm81.3 183.6c25.5-34.2 45.2-87.7 55.3-151.6H376.7c-10 63.9-29.8 117.4-55.3 151.6c-78.3-20.7-142-77.5-171.9-151.6z"/>
                </svg>
                <span id="current-language">English</span>
            </button>
            <div id="language-dropdown" class="language-dropdown">
                <button class="language-option" onclick="setLanguage('en'); toggleLanguageDropdown();">English</button>
                <button class="language-option" onclick="setLanguage('fr'); toggleLanguageDropdown();">Français</button>
                <button class="language-option" onclick="setLanguage('ar'); toggleLanguageDropdown();">العربية</button>
            </div>
        </div>
       <a href="../login.php">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                <path d="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/>
            </svg>
        </a>
    </header>

    <main>
        <div class="login-container">
            <div class="login-header">
                <h1>Welcome Back</h1>
                <p>Login or create an account to continue</p>
            </div>

            <div id="alert" class="alert"></div>

            <div class="form-tabs">
                <button class="active" onclick="switchForm('login')">Login</button>
                <button onclick="switchForm('register')">Register</button>
            </div>

            <!-- Login Form -->
            <div id="login-form" class="form-container active">
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <div class="password-toggle">
                            <input type="password" id="login-password" required placeholder="Enter your password">
                            <i class="fas fa-eye" onclick="togglePassword('login-password', this)"></i>
                        </div>
                    </div>
                    <button type="submit" class="submit-btn">Login</button>
                </form>
                <div class="form-footer">
                    <p><a href="#">Forgot password?</a></p>
                </div>
            </div>

            <!-- Register Form -->
            <div id="register-form" class="form-container">
                <form onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label for="register-name">Full Name</label>
                        <input type="text" id="register-name" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="register-email">Email Address</label>
                        <input type="email" id="register-email" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <div class="password-toggle">
                            <input type="password" id="register-password" required placeholder="Create a password" minlength="6">
                            <i class="fas fa-eye" onclick="togglePassword('register-password', this)"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="register-confirm">Confirm Password</label>
                        <div class="password-toggle">
                            <input type="password" id="register-confirm" required placeholder="Confirm your password" minlength="6">
                            <i class="fas fa-eye" onclick="togglePassword('register-confirm', this)"></i>
                        </div>
                    </div>
                    <button type="submit" class="submit-btn">Create Account</button>
                </form>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Modilo. All rights reserved.</p>
        <div id="footer-socials">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
        </div>
    </footer>

    <script src="../js/cart.js"></script>
    <script>
        // Switch between login and register forms
        function switchForm(formType) {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const tabs = document.querySelectorAll('.form-tabs button');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            
            if (formType === 'login') {
                loginForm.classList.add('active');
                registerForm.classList.remove('active');
                tabs[0].classList.add('active');
            } else {
                registerForm.classList.add('active');
                loginForm.classList.remove('active');
                tabs[1].classList.add('active');
            }
            
            hideAlert();
        }

        // Toggle password visibility
        function togglePassword(inputId, icon) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Show alert message
        function showAlert(message, type) {
            const alert = document.getElementById('alert');
            alert.textContent = message;
            alert.className = `alert ${type}`;
            alert.style.display = 'block';
            
            setTimeout(() => {
                hideAlert();
            }, 5000);
        }

        function hideAlert() {
            const alert = document.getElementById('alert');
            alert.style.display = 'none';
        }

        // Handle Login
        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // Get users from localStorage
            const users = JSON.parse(localStorage.getItem('modiloUsers') || '[]');
            
            // Find user
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                // Store logged in user
                localStorage.setItem('modiloLoggedInUser', JSON.stringify({
                    name: user.name,
                    email: user.email,
                    loginTime: new Date().toISOString()
                }));
                
                showAlert('Login successful! Redirecting...', 'success');
                
                setTimeout(() => {
                    window.location.href = '../index.html';
                }, 1500);
            } else {
                showAlert('Invalid email or password. Please try again.', 'error');
            }
        }

        // Handle Registration
        function handleRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            
            // Validation
            if (password !== confirm) {
                showAlert('Passwords do not match!', 'error');
                return;
            }
            
            if (password.length < 6) {
                showAlert('Password must be at least 6 characters long!', 'error');
                return;
            }
            
            // Get existing users
            const users = JSON.parse(localStorage.getItem('modiloUsers') || '[]');
            
            // Check if email already exists
            if (users.some(u => u.email === email)) {
                showAlert('Email already registered. Please login instead.', 'error');
                return;
            }
            
            // Add new user
            users.push({
                id: Date.now().toString(),
                name: name,
                email: email,
                password: password,
                createdAt: new Date().toISOString()
            });
            
            localStorage.setItem('modiloUsers', JSON.stringify(users));
            
            showAlert('Account created successfully! You can now login.', 'success');
            
            // Clear form
            document.getElementById('register-name').value = '';
            document.getElementById('register-email').value = '';
            document.getElementById('register-password').value = '';
            document.getElementById('register-confirm').value = '';
            
            // Switch to login form after 2 seconds
            setTimeout(() => {
                switchForm('login');
            }, 2000);
        }

        // Check if user is already logged in
        document.addEventListener('DOMContentLoaded', function() {
            const loggedInUser = localStorage.getItem('modiloLoggedInUser');
            if (loggedInUser) {
                const user = JSON.parse(loggedInUser);
                showAlert(`Welcome back, ${user.name}! Redirecting to home...`, 'success');
                setTimeout(() => {
                    window.location.href = '../index.html';
                }, 2000);
            }
        });
    </script>
</body>
</html>